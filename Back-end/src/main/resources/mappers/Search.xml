<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 	
		 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.web.curation.dao.SearchDao">

	<!-- 편성표 리스트 출력 -->
	<select id="singerAllList" resultType="com.web.curation.dto.SingerDto">
		select * from Singer;
	</select>
 	<select id="singerSearch" parameterType="int" resultType="com.web.curation.dto.SingerDto">
		select * from Singer where s_idx = #{s_idx};
	</select>
	
	<!-- 비디오 추가 -->
	<insert id="addvideo">
		insert into Board (b_type,b_url,b_title,b_content,b_member,b_thumbnail,b_date)
		values(1,#{b_url},#{b_title},#{b_content},#{b_member},#{b_thumbnail},#{b_date})
	</insert>

	<!-- 기사 추가 -->
	<insert id="addarticle">
		insert into Board
		(b_type, b_url,b_title,b_member,b_thumbnail,b_date,b_company)
		values(2,#{b_url},#{b_title},#{b_member},#{b_thumbnail},#{b_date},#{b_company})
	</insert>

	<!-- 비디오 리스트 조회 -->
	<select id="selectvideolist" resultType="BoardDto">
		select *
		from Board
		where 1=1
		and b_member = #{s_name}
		and b_type = 1
		order by b_idx desc
		
	</select>

	<!-- 디비에 해당 번호의 동영상이 있는지 확인 -->
	<select id="isurl" resultType="Boolean">
		select Count(*) from Board
		where 1=1 
		and b_type = 1
		and b_url like CONCAT("%", #{vno}, "%") and b_member = #{name}

	</select>

	<!-- 디비에 해당 url의 기사가 있는지 확인 -->
	<select id="isurl2" resultType="Boolean">
		select Count(*) from Board
		where 1=1
		and b_type = 2
		and b_url like CONCAT("%", #{url}, "%") and b_member = #{name}

	</select>

	<!-- 기사 리스트 조회 -->
	<select id="selectarticlelist" resultType="BoardDto">
		select *
		from Board
		where 1=1
		and b_member = #{s_name}
		and b_type = 2
		order by b_idx desc;
	</select>
	
	<!-- 동영상 디테일 -->
	<select id="videodetail" resultType="BoardDto">
		select * 
		from Board
		where 1=1
		and b_type = 1
		and b_idx = #{b_idx}
		<!-- and b_member = (select s_name from Singer where s_idx = #{s_idx}) -->
	</select>
	
	<!-- 편성표 리스트 출력 -->
	<select id="broadCastAllList" resultType="com.web.curation.dto.BroadCastingDto">
		select * from BroadCasting where bc_member = "";
	</select>
	
	<!-- 가수 스케줄 출력 -->
	<select id="singerScheduleList" parameterType="String" resultType="com.web.curation.dto.BroadCastingDto">
		select * from BroadCasting where bc_member = #{s_name};
	</select>
	
	<!-- 영상 또는 기사 총 개수 -->
	<select id="countallvideoarticle" resultType="Integer">
		select Count(*) from Board where b_type = #{b_type}
	</select> 
	
	<!-- 영상 또는 기사 가수별 개수 -->
	<select id="countmembervideoarticle" resultType="Integer">
	select Count(*) from Board where b_type = #{b_type}
	and b_member = (select s_name from Singer where s_idx = #{s_idx})
	</select> 
	
	<select id="videogood" resultType="BoardDto">
		select * from Board
		where 1=1
		and b_type = #{b_type}
		order by b_good desc;
	</select>
 </mapper>
        